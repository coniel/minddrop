/* ============================================================
   NUMBER FIELD
   Built on Base UI NumberField primitive.
   Extends text-field styles — .text-field class is applied
   to the root so all variant/size/state styles are inherited.
   ============================================================ */

/* --- Root --- */

.number-field {
  /* Inherits all .text-field layout styles */
}

/* --- Group (wraps input + buttons) --- */

.number-field-group {
  position: relative;
  width: 100%;
}

/* --- Input --- */

.number-field-input {
  /* Hides native browser spin buttons */
  -moz-appearance: textfield;

  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
}

/* --- Stepper (increment + decrement button container) --- */

.number-field-stepper {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 1.5rem;
  display: flex;
  flex-direction: column;
  z-index: 1;

  opacity: 0;
  pointer-events: none;
  transition: opacity var(--duration-fast) var(--ease-out);

  .number-field-group:hover & {
    opacity: 1;
    pointer-events: auto;
  }
}

/* --- Gradient backdrop --- */

.number-field-gradient {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 2rem;
  pointer-events: none;
  z-index: 0;
  border-radius: 0 var(--radius-md) var(--radius-md) 0;

  opacity: 0;
  transition: opacity var(--duration-fast) var(--ease-out);

  .number-field-group:hover & {
    opacity: 1;
  }
}

/* Gradient colour matches the input's background per variant.
   Uses a CSS custom property set on each variant wrapper so the
   gradient always fades into the correct surface colour.
   'transparent' in gradients interpolates through black, so we
   use color-mix to produce a zero-alpha version of the bg colour. */

.number-field-gradient {
  background: linear-gradient(
    to right,
    color-mix(in srgb, var(--number-field-bg) 0%, transparent),
    var(--number-field-bg)
  );
}

/* ghost / outline — no background fill, use app surface */
.text-field-variant-ghost,
.text-field-variant-outline {
  --number-field-bg: var(--surface-app);
}

.text-field-variant-outline .number-field-group:hover {
  --number-field-bg: var(--surface-neutral);
}

/* subtle */
.text-field-variant-subtle {
  --number-field-bg: var(--surface-subtle);
}

.text-field-variant-subtle .number-field-group:hover {
  --number-field-bg: var(--surface-neutral);
}

/* filled */
.text-field-variant-filled {
  --number-field-bg: var(--surface-paper);
}

.text-field-variant-filled .number-field-group:hover {
  --number-field-bg: var(--surface-neutral);
}

/* --- Trailing slot fades out on stepper hover --- */

.number-field-group:hover .text-field-trailing {
  opacity: 0;
  transition: opacity var(--duration-fast) var(--ease-out);
}

/* --- Stepper buttons --- */

.number-field-increment,
.number-field-decrement {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  outline: none;
  cursor: default;
  padding: 0;
  color: var(--text-subtle);

  transition: color var(--duration-fast) var(--ease-out);

  &:hover {
    color: var(--text-regular);
  }

  &[data-disabled] {
    opacity: 0.3;
    pointer-events: none;
  }
}

/* --- Triangle icons --- */

.number-field-increment-icon,
.number-field-decrement-icon {
  display: block;
  width: 0;
  height: 0;
  border-left: solid transparent;
  border-right: solid transparent;
}

/* Sizes scale with input size */

.text-field-size-sm {
  .number-field-increment-icon,
  .number-field-decrement-icon {
    border-left-width: 0.2rem;
    border-right-width: 0.2rem;
  }

  .number-field-increment-icon {
    border-bottom: 0.22rem solid currentColor;
  }

  .number-field-decrement-icon {
    border-top: 0.22rem solid currentColor;
  }
}

.text-field-size-md,
.text-field:not(.text-field-size-sm):not(.text-field-size-lg) {
  .number-field-increment-icon,
  .number-field-decrement-icon {
    border-left-width: 0.225rem;
    border-right-width: 0.225rem;
  }

  .number-field-increment-icon {
    border-bottom: 0.25rem solid currentColor;
  }

  .number-field-decrement-icon {
    border-top: 0.25rem solid currentColor;
  }
}

.text-field-size-lg {
  .number-field-increment-icon,
  .number-field-decrement-icon {
    border-left-width: 0.275rem;
    border-right-width: 0.275rem;
  }

  .number-field-increment-icon {
    border-bottom: 0.3rem solid currentColor;
  }

  .number-field-decrement-icon {
    border-top: 0.3rem solid currentColor;
  }
}

/* --- Bump animations --- */

/* Bump animations — triggered by adding/removing .is-bumping class.
   Double rAF in the component ensures rapid clicks restart cleanly. */

@keyframes number-field-bump-up {
  0% {
    transform: translateY(0);
  }
  30% {
    transform: translateY(-4px);
  }
  100% {
    transform: translateY(0);
  }
}

@keyframes number-field-bump-down {
  0% {
    transform: translateY(0);
  }
  30% {
    transform: translateY(4px);
  }
  100% {
    transform: translateY(0);
  }
}

.number-field-increment.is-bumping .number-field-increment-icon {
  animation: number-field-bump-up 250ms linear forwards;
}

.number-field-decrement.is-bumping .number-field-decrement-icon {
  animation: number-field-bump-down 250ms linear forwards;
}
